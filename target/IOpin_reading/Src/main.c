/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2026 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */


/* program to reads the status of the pin A0 then showing the status of the pin at pinD12, if the pinA0 is low pinD12 will turn off the on-board led. if the pinA0 is high the pinD12 will turn on the on-board led.
*/

#include <stdint.h>
#include<stdio.h>

#if !defined(__SOFT_FP__) && defined(__ARM_FP)
  #warning "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use."
#endif

void delay(void);
int main(void)
{
	uint32_t *const pRCC_AHB1_clkenRegister = (uint32_t *)(0x40023800+0x30);//this pointer is to point the content in RCC clk enable register for the port D


	uint32_t *const pGPIOD_MODER            = (uint32_t *)(0x40020C00+0x00);//this pointer is to point the content of the GPIO MODER register of portD
	uint32_t *const pGPIOA_MODER            = (uint32_t *)(0x40020000+0x00);//this pointer is to point the content of the GPIO MODER register of portA

	uint32_t *const pGPIOD_ODR              = (uint32_t *)(0x40020C00+0x14);//this pointer is used to modify the content of the output register of the portD
	uint32_t *const pGPIOA_IDR              = (uint32_t *)(0x40020000+0x10);//this pointer is used to modify the content of the input data register of the portA

	uint8_t volatile value ; // used to act as counter bit
    /* Loop forever */
	*pRCC_AHB1_clkenRegister |= 0x9;//used to enable the clock

	*pGPIOD_MODER &= (~(0b11<<24));//used to clear portD, required bit fields to set as output
	*pGPIOD_MODER |= ((0x01<<24));//for setting the portD to output mode

	*pGPIOA_MODER &= ~(0x3<<0);//clearing the portA pin 0 which makes the pin as input pin

	while(1){
		value = (uint8_t) (*pGPIOA_IDR & 0x1);
		if(value){
			*pGPIOD_ODR |= (0x1<<12);
		}
		else{
			*pGPIOD_ODR &= (!(0x1<<12));
		}

	}
}

void delay(void)
{
	for(uint32_t i = 0; i <= 500000; i++ );
}
