/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2026 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

// same led blink but using the struct and union combination for better accessing of the bit field

#include <stdint.h>
#include<stdio.h>
#include"main.h"


#if !defined(__SOFT_FP__) && defined(__ARM_FP)
  #warning "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use."
#endif

void delay(void);
int main(void)
{
	RCC_AHB1ENR_t *const pRCC_AHB1ENR   = (RCC_AHB1ENR_t *)(0x40023800+0x30);//this pointer is to point the content in RCC clk enable register for the port D
	GPIOx_MODER_u *const pGPIOD_MODER   = (GPIOx_MODER_u *)(0x40020C00+0x00);//this pointer is to point the content of the GPIO MODER register
	GPIOx_ODR_u   *const pGPIOD_ODR     = (GPIOx_ODR_u *)(0x40020C00+0x14);//this pointer is used to modify the content of the output register of the port D
	uint8_t volatile value = 0; // used to act as counter bit
    /* Loop forever */

	pRCC_AHB1ENR->GPIOD_EN     = 0b1;
	pGPIOD_MODER->MODER_12_15  = ((0x55));

	while( 1 )
	{
		pGPIOD_ODR->MODER_12_15 = ((0x0));//setting the output value as 0
		delay();
		pGPIOD_ODR->MODER_12_15 = (value);
		value++;
		delay();
	}
}

void delay(void)
{
	for(uint32_t i = 0; i <= 500000; i++ );
}
